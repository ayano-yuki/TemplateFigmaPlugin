# 現状プログラムの全体解説

このドキュメントでは、現状のFigmaプラグインの動作・構成・処理の流れについて解説します。

---

## 1. プラグインの全体構成

- **UI（figma/ui.html）**
  - ユーザーが操作する「円を作成」ボタンを持つシンプルなHTML
  - JavaScriptでFigma本体とメッセージをやり取り

- **メインロジック（figma/code.ts → code.js）**
  - Figma APIを使って図形（円）を作成
  - UIからのメッセージを受信し、処理を実行

- **設定ファイル（figma/manifest.json）**
  - プラグインのエントリーポイントや基本情報を定義

---

## 2. ユーザー操作から円作成までの流れ

1. ユーザーがFigmaでプラグインを起動
2. プラグインUI（ui.html）が表示され、「円を作成」ボタンが現れる
3. ユーザーが「円を作成」ボタンをクリック
4. UIのJavaScriptが `parent.postMessage({ pluginMessage: { type: 'create-circle' } }, '*');` でFigma本体にメッセージ送信
5. バックエンド（code.js）がこのメッセージを受信
6. `figma.createEllipse()` で円を作成し、位置(0,0)、サイズ(100,100)に設定
7. 作成した円をキャンバスに追加し、選択状態にする
8. UIに「(0, 0) に直径100の円を作成しました」とステータスメッセージを返す

---

## 3. UIとバックエンドの連携

- UI（ui.html）とバックエンド（code.js）は、メッセージ送受信で連携
- UI → バックエンド：`parent.postMessage` で操作指示を送信
- バックエンド → UI：`figma.ui.postMessage` で処理結果やエラーを通知

---

## 4. カスタマイズのポイント

- **作成する図形やサイズ・位置を変更したい場合**
  - `figma/code.ts` の `ellipse.x`, `ellipse.y`, `ellipse.resize` の値を編集
- **UIの見た目や文言を変えたい場合**
  - `figma/ui.html` のHTMLやJavaScriptを編集
- **複雑な処理や追加機能を実装したい場合**
  - UIとバックエンドのメッセージ設計を拡張
  - Figma APIの他のメソッドも活用可能

---

## 5. まとめ

このプラグインは「ボタンを押すと(0,0)に直径100の円を作成する」シンプルな構成です。
UIとバックエンドの連携やFigma APIの使い方の基本を学ぶのに最適なサンプルとなっています。

---

ご自身のアイデアに合わせて、自由に拡張・カスタマイズしてください。 